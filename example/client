#!/usr/bin/python

import websocketd
import glib

class Reader:
	def __init__ (self, socket):
		pass
	def quit (self):
		websocketd.endloop ()

c = websocketd.RPC (8000, Reader)

# Use an idle handler, because endloop must not be called before fgloop.
def later ():
	print c.a ()
glib.idle_add (later)

websocketd.fgloop ()
